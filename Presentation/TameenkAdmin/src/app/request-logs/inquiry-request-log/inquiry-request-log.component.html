
<div class="row">
  <div class="col-xs-12">
    <h4 class="page-header">{{ 'requestLogs.inquiryRequestLog' | translate }}</h4>
  </div>
</div>
<div class="row">
  <div class="panel panel-default">
    <div class="panel-heading" translate>common.filter_by</div>
    <!-- /.panel-heading -->
    <div class="panel-body">
      <div class="row">
        <div class="col-sm-3">
          <div class="form-group">
            <label for="NIN">{{ 'driver.nin' | translate }}</label>
            <input type="text"
                   [(ngModel)]="requestLogsFilter.NIN"
                   class="form-control"
                   id="NIN" />
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="vehicleId">{{ 'vehicle.vehicleId' | translate }}</label>
            <input type="text"
                   [(ngModel)]="requestLogsFilter.vehicleId"
                   class="form-control"
                   id="vehicleId" />
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="externalId">{{ 'requestLogs.externalId' | translate }}</label>
            <input type="text"
                   [(ngModel)]="requestLogsFilter.externalId"
                   class="form-control"
                   id="externalId" />
          </div>

        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="channel" translate>requestLogs.channel</label>
            <app-channels-dropdown [(selectedValue)]="requestLogsFilter.channel"> </app-channels-dropdown>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label for="fdate" translate>requestLogs.logDate</label>
          <div class="form-group">
            <div class="row">
              <div class="col-md-6">
                <p-calendar [(ngModel)]="requestLogsFilter.startDate"
                            [showIcon]="true"
                            [placeholder]="'common.from' | translate"
                            [maxDate]="requestLogsFilter.endDate || today"
                            styleClass="w-100"
                            inputStyleClass="form-control"></p-calendar>
              </div>
              <div class="col-md-6">
                <p-calendar [(ngModel)]="requestLogsFilter.endDate"
                            [showIcon]="true"
                            [placeholder]="'common.to' | translate"
                            [minDate]="requestLogsFilter.startDate"
                            [maxDate]="today"
                            styleClass="w-100"
                            inputStyleClass="form-control"></p-calendar>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12 col-md-2">
          <button (click)="filterClick(inquiryRequestLogTable)" [disabled]="isSearch"
                  class="btn btn-primary"
                  style="margin-top: 20px;"
                  translate>
            common.search
          </button>
        </div>

      </div>
    </div>
    <br />
  </div>
  <!-- /.panel-body -->
</div>
<!-- /.panel -->
<!-- /.row -->
<div class="row" [ngClass]="{'hidden': firstTime}">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <a (click)="exportCsv()" class="pointer" translate>common.export</a>
        <div class="text-left clearfix">
          {{'common.results_count' | translate}} : {{inquiryRequestLogsCount}}
        </div>
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table #inquiryRequestLogTable
                 [value]="inquiryRequestLogs"
                 [lazy]="true"
                 (onLazyLoad)="inquiryRequestLogLazyLoad($event)"
                 [lazyLoadOnInit]="false"
                 [totalRecords]="inquiryRequestLogsCount"
                 [resetPageOnSort]="true"
                 [rowsPerPageOptions]="[5, 10, 20]"
                 [loading]="loading"
                 [paginator]="true"
                 [rows]="10"
                 [responsive]="true"
                 scrollHeight="200px"
                 [autoLayout]="true"
                 [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th [pSortableColumn]="'RequestId'">
                {{ 'requestLogs.channel' | translate }}
                <p-sortIcon [field]="'channel'"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'VehicleId'">
                {{ 'vehicle.vehicleId' | translate }}
                <p-sortIcon [field]="'VehicleId'"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'NIN'">
                {{ 'driver.nin' | translate }}
                <p-sortIcon [field]="'NIN'"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'CreatedDate'">
                {{ 'common.createdAt' | translate }}
                <p-sortIcon [field]="'CreatedDate'"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'MethodName'">
                {{ 'requestLogs.methodName' | translate }}
                <p-sortIcon [field]="'MethodName'"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'policy_effective_date'">
                {{ 'requestLogs.errorDescription' | translate }}
                <p-sortIcon [field]="'ErrorDescription'"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th>
                {{ 'common.action' | translate }}
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-inquiryRequestLog>
            <tr>
              <td style="word-wrap: break-word">
                {{inquiryRequestLog.channel || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{inquiryRequestLog.vehicleId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word;text-align: center">
                {{inquiryRequestLog.nin || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word;text-align: center">
                {{inquiryRequestLog.createdDate || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word;text-align: center">
                {{inquiryRequestLog.methodName || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word;text-align: center">
                {{inquiryRequestLog.errorDescription || emptyStringValue }}
              </td>
              <td>
                <button type="button" routerLink="/admin/requestLogs/inquiryRequestLog/details/{{inquiryRequestLog.Id}}" routerLinkActive="active" class="btn btn-secondary action-btn" translate>common.details</button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<!-- <app-loader *ngIf="firstTime"></app-loader> -->
