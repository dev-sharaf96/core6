<div class="row">
  <div class="col-xs-12">
    <h4 class="page-header">{{ "Claims.ClaimsFollowUp" | translate }}</h4>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading" translate>common.filter_by</div>
      <div class="panel-body">
        <div class="row">
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="referenceId" translate>Claims.reference</label>
              <input
                type="text"
                [(ngModel)]="ClaimsFilter.referenceId"
                class="form-control"
                id="referenceId"
              />
            </div>
          </div>
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="policyNo" translate>Claims.Policy No</label>
              <input
                type="text"
                [(ngModel)]="ClaimsFilter.policyNo"
                class="form-control"
                id="policyNo"
              />
            </div>
          </div>

          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="nationalId" translate>Claims.National Id</label>
              <input
                type="text"
                [(ngModel)]="ClaimsFilter.nationalId"
                class="form-control"
                id="nationalId"
              />
            </div>
          </div>

          <!-- dropdown -->
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="statusId" translate>common.status</label>
              <app-custom-dropdown
                [(selectedValue)]="ClaimsFilter.statusId"
                id="statusId"
                [options]="claimsOptions"
              ></app-custom-dropdown>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="requesterTypeId" translate
                >Claims.RequesterType</label
              >
              <app-custom-dropdown
                [(selectedValue)]="ClaimsFilter.requesterTypeId"
                id="requesterTypeId"
                [options]="claimRequesterTypeOptions"
              ></app-custom-dropdown>
            </div>
          </div>

          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="accidentReportNumber" translate
                >Claims.AccidentReportNumber</label
              >
              <input
                type="text"
                [(ngModel)]="ClaimsFilter.accidentReportNumber"
                class="form-control"
                id="accidentReportNumber"
              />
            </div>
          </div>

          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="iban">IBAN</label>
              <input
              type="text"
              [(ngModel)]="ClaimsFilter.iban"
              class="form-control"
              id="iban"
            />
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12 col-md-3">
            <p-calendar
              [(ngModel)]="ClaimsFilter.startDate"
              [showIcon]="true"
              [placeholder]="'common.from' | translate"
              [maxDate]="ClaimsFilter.endDate || today"
              styleClass="w-100"
              inputStyleClass="form-control"
            ></p-calendar>
          </div>

          <div class="col-xs-12 col-md-3">
            <p-calendar
              [(ngModel)]="ClaimsFilter.endDate"
              [showIcon]="true"
              [placeholder]="'common.to' | translate"
              [maxDate]="today"
              styleClass="w-100"
              inputStyleClass="form-control"
            ></p-calendar>
          </div>

          <div class="col-xs-12 col-md-2">
            <button
              (click)="filterClick(reportsTable)"
              [disabled]="isSearch"
              class="btn btn-primary"
              translate
            >
              common.search
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row" [ngClass]="{ hidden: firstTime }">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="text-left clearfix">{{'common.results_count' | translate}} : {{claimsListing?.length}}
        </div>
      </div>      <div class="panel-body">
        <p-table
          #reportsTable
          [value]="claimsListing"
          [lazy]="true"
          (onLazyLoad)="FilterCliamsLazyLoad($event)"
          [lazyLoadOnInit]="false"
          [rowsPerPageOptions]="[5, 10, 20]"
          [loading]="loading"
          [paginator]="true"
          [rows]="10"
          [responsive]="true"
          scrollHeight="200px"
          [autoLayout]="true"
          [resizableColumns]="true"
          [totalRecords]="claimsListing?.length">
        >
          <ng-template pTemplate="header">
            <tr>
              <th translate>Claims.reference</th>
              <th translate>Claims.Policy No</th>
              <th>IBAN</th>
              <th translate>Claims.createdDate</th>
              <th translate>common.status</th>
              <th translate>common.action</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-request>
            <tr>
              <td style="word-wrap: break-word">
                {{ request.referenceId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.policyNo || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.iban || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.createdDate || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.claimStatusId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word; text-align: center">
                <button
                  type="button"
                  routerLink="/admin/ClaimsFollowUp/details/{{ request.id }}"
                  routerLinkActive="active"
                  class="btn btn-secondary action-btn"
                  translate
                >
                  policy.details
                </button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr style="text-align: center">
              <td>
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>
