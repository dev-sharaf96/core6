<div class="row">
  <div class="col-xs-12">
    <h4 class="page-header">{{ 'Benfit.addBenefitService' | translate }}</h4>
  </div>
</div>
<div   class="row">
  <div  class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading" translate>common.filter_by</div>
      <div class="panel-body">
        <div class="row">
      
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="referenceNo" translate>Benfit.policyNo</label>
              <input type="text" [(ngModel)]="benfitFilter.policyNo" class="form-control" id="referenceNo" />
            </div>
          </div>
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="policy_number" translate>Benfit.insurredId</label>
              <input type="text" [(ngModel)]="benfitFilter.insurredId" class="form-control" id="policy_number" />
            </div>
          </div>
          <div class="col-xs-12 col-md-3">
            <div class="form-group">
              <label for="invoiceNo" translate>Benfit.referenceNo</label>
              <input type="text" [(ngModel)]="benfitFilter.referenceNo" class="form-control" id="invoiceNo" />
            </div>
          </div>

          <div class="col-xs-12 col-md-2">
            <button (click)="filterClick(reportsTable)" [disabled]="isSearch" class="btn btn-primary" style="margin-top: 20px;" translate>
              common.search
              <i class="fa fa-spinner fa-spin" *ngIf="loading"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div [hidden]="confermed"  class="row" [ngClass]="{'hidden': firstTime}">
  <div class="col-lg-12">
    <div class="panel panel-default">
    
      <div class="panel-heading">
      </div>
      <!-- /.panel-heading -->
      <div   class="panel-body">
        <div [hidden]="isTable">
          <p-table #reportsTable
          [value]="BenfitData"    
          [lazy]="true"
          (onLazyLoad)="SuccessPoliciesLazyLoad($event)"
          [lazyLoadOnInit]="false"
          [rowsPerPageOptions]="[5, 10, 20]"
          [loading]="loading"
          [paginator]="true"
          [rows]="10"
          [responsive]="true"
          scrollHeight="200px"
          [autoLayout]="true"
          [resizableColumns]="true">
   <ng-template pTemplate="header">
     <tr>
       <th translate> Benfit.policyNo </th>
       <th translate> Benfit.insurredId </th>
       <th translate> Benfit.referenceNo </th>
       <th translate> Benfit.BenfitEdit </th>
     </tr>
   </ng-template>
   <!-- let-request -->
   <ng-template pTemplate="body" let-request >
     <tr>
       <td style="word-wrap: break-word">
         {{ request.policyNo || emptyStringValue}}
       </td>
       <td style="word-wrap: break-word">
         {{ request.insuredNIN || emptyStringValue }}
       </td>
       <td style="word-wrap: break-word">
         {{ request.referenceId || emptyStringValue }}
       </td>
   <td>
   <button *ngIf="request.referenceId"
   (click)="showBenfitDetails(request)"
   class="btn btn-primary small action-btn mt-2" translate>Benfit.addBenfit</button>
   </td>
      
     </tr>
   </ng-template>
   <ng-template pTemplate="emptymessage">
     <tr>
       <td style="text-align: center">
         {{ "common.noRecordsFound" | translate }}
       </td>
     </tr>
   </ng-template>
 </p-table>
        </div>
     


        <div [hidden]="isFristStep">
          <form #AddBenfitForm="ngForm" (ngSubmit)="AddBenfit()" >
          <div class="panel panel-default">
            <div class="panel-heading" translate>Benfit.addBenefitService</div>
            <div class="panel-body">
              <div class="row">
                <div class="col-xs-12 col-md-3">
                  <div class="form-group">
                    <label for="invoiceNo" translate>Benfit.referenceNo</label>
                    <input disabled type="text" [(ngModel)]="selectedPolicy.referenceId" class="form-control" id="invoiceNo" name="referenceId" />
                  </div>
                </div>
                <div class="col-xs-12 col-md-3">
                  <div class="form-group">
                    <label for="referenceNo" translate>Benfit.policyNo</label>
                    <input disabled type="text" [(ngModel)]="selectedPolicy.policyNo" class="form-control" id="referenceNo" name="policyNo" />
                  </div>
                </div>
                <div class="col-xs-12 col-md-3">
                  <div class="form-group">
                    <label for="fdate">{{'Benfit.additionStratdate'| translate}} {{'common.to'| translate}}</label>
                      <div class="form-group">
                    <p-calendar
                      [(ngModel)]="newDate"
                      [showIcon]="true"
                      [placeholder]="'common.to' | translate"
                      [minDate]="today"
                      [maxDate]=""
                      styleClass="w-100" 
                      inputStyleClass="form-control"
                      name="newDate"
                      #NDate=ngModel
                      required
                      ></p-calendar>
                      <span style="color: red;" *ngIf="NDate.errors?.required">*</span> 
                       <!-- <span *ngIf="newDate.invalid && AddBenfitForm.submitted">
                        <span class="field-error" *ngIf="newDate.errors['required']">{{'common.required' | translate}}</span>
                        <span class="field-error" *ngIf="newDate.errors['invalid']">{{'common.invalid' | translate}}</span>
                      </span>  -->
                  </div>
                </div>
              </div>
              <div class="col-xs-12 col-md-3">
                <button type="submit"  class="btn btn-primary" style="margin-top: 20px;" translate [disabled]="!newDate">
                  Benfit.Next
                </button>
              </div>
            </div>
          </div>
        </div>
          </form>
        </div>
        <div  [hidden]="isScondStep">
          <div class="panel panel-default">
            <div class="panel-heading" translate>Benfit.additionalBenfit</div>
            <div class="panel-body">
              <div class="row">
<div>
<div class="ui-g" style="margin-bottom:10px">
  <div class="ui-g-12">
    <!-- *ngFor="let item of BenfitData.benefits" -->
    <div class="col-md-12" *ngFor="let item of CusomerBenfit.benefits" >
    
      <p-checkbox *ngIf="isEnglish" name="group2" value={{item.BenefitId}} 

      label= {{item.BenefitNameEn}} 
      
      [(ngModel)]="selectedBenfits" ></p-checkbox>

      <p-checkbox  *ngIf="!isEnglish" name="group2" value={{item.BenefitId}} 

      label= {{item.BenefitNameAr}} 
      
      [(ngModel)]="selectedBenfits" ></p-checkbox>
    
    
      {{item.BenefitPrice}}
    </div>
    <div col-md-6>
      
    </div>

  </div>
</div>
<h6>
<!-- Selected Benfits : <span *ngFor="let ben of additionaBenfits.benefits" style="margin-right:10px">{{ben}} </span> -->
</h6>
</div>
      
                <div class="col-xs-12 col-md-2">
                  <button (click)="PurchedBenfit()"  class="btn btn-success" style="margin-top: 20px;" translate>
                    Benfit.buyNow
                    <i class="fa fa-spinner fa-spin" *ngIf="loading1"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
