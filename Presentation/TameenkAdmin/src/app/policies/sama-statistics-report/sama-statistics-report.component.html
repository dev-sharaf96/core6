
<div class="row">
  <div class="col-xs-12">
    <h4 class="page-header">{{ 'SamaStatictics.Statictics' | translate }}</h4>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading" translate>common.filter_by</div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <div class="row">
          <!-- <div class="col-xs-12 col-md-4">
            <div class="form-group">
              <label for="" translate>common.status</label>
              <app-status-dropdown [(selectedValue)]="requestsFilter.StatusCode"></app-status-dropdown>
            </div>
          </div> -->
        </div>
        <div class="row">
          <div class="col-sm-12 col-md-6">
            <div class="row">
                <div class="col-md-6">
                    <label for="fdate">{{'serviceRequests.date'| translate}} {{'common.from'| translate}}</label>
                    <div class="form-group">
                    <p-calendar
                      [(ngModel)]="startDate"
                      [showIcon]="true"
                      [placeholder]="'common.from' | translate"
                      [maxDate]="endDate"
                      styleClass="w-100" inputStyleClass="form-control"
                    ></p-calendar>
                    </div>
                  </div>
                  <div class="col-md-6">
                      <label for="fdate">{{'serviceRequests.date'| translate}} {{'common.to'| translate}}</label>
                      <div class="form-group">
                    <p-calendar
                      [(ngModel)]="endDate"
                      [showIcon]="true"
                      [placeholder]="'common.to' | translate"
                      [minDate]="startDate"
                      [maxDate]="today"
                      styleClass="w-100" inputStyleClass="form-control"
                      ></p-calendar>
                  </div>
                </div>
            </div>
          </div>
          <div class="col-sm-12 col-md-6">
            <div class="row">
                 <div class="col-xs-12 col-md-6">
                    <button
                      (click)="filterClick(reportsTable)" [disabled]="isSearch"
                      class="btn btn-primary"
                      style="margin-top: 20px;"
                      translate>
                      common.search
                    </button>
                  </div>
            </div>

          </div>

        </div>
        <br />
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

<div class="row" [ngClass]="{'hidden': firstTime}">
  <div class='panel-heading' >
    <a (click)="exportSamaMegaReport()" class="pointer text-left clearfix"  translate >{{'SamaStatictics.Export' | translate}}</a>

  </div>

<!------حسب الجنس  - عدد الوثائق-->
<div class="row" [ngClass]="{'hidden': firstTime}">
 
  <div class="col-lg-12">
    
    <div class="panel panel-default">
      <div class="panel-heading">
     
         <div class="text-left clearfix">{{'SamaStatictics.Count of Polices per Gender' | translate}}
        </div> 
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table
          #reportsTable
            [value]="totalPolicesGenderModel"
            [lazy]="true"
            (onLazyLoad)="requestsLazyLoad($event)"
            [lazyLoadOnInit]="false"
            [totalRecords]="requestsCount"
            [resetPageOnSort]="true"
            [rowsPerPageOptions]="[25]"
            [loading]="loading"
            [paginator]="false"
            [rows]="10"
            [responsive]="true"
            scrollHeight="200px"
            [autoLayout]="true"
            [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
              <!-- <input class="form-control input-sm" type="text" pInputText placeholder="{{'common.search' | translate}}" (input)="reportsTable.filterGlobal($event.target.value, 'contains')"> -->
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate>
                SamaStatictics.IndexCount
              </th>
              <th translate>
                SamaStatictics.Item
              </th>
              <th translate>
                SamaStatictics.Male
              </th>  <th translate>
                SamaStatictics.Female
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-request>
            <tr>
              <td style="word-wrap: break-word">
                {{ request.Index || emptyStringValue}}
              </td>
              <td style="word-wrap: break-word">
                {{ request.Item || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.TotalPolicesPerGenderMale || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.TotalPolicesPerGenderFemale || emptyStringValue }}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>


<!------------حسب العمر - عدد الوثائق---------->
<div class="row" [ngClass]="{'hidden': firstTime}">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
     
        <div class="text-left clearfix">{{'SamaStatictics.Count of Polices per Age' | translate}} 
       </div> 
     </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table
          #reportsTable
            [value]="allAgeRanges"
            [lazy]="true"
            (onLazyLoad)="requestsLazyLoad($event)"
            [lazyLoadOnInit]="false"
            [totalRecords]="requestsCount"
            [resetPageOnSort]="true"
            [rowsPerPageOptions]="[25]"
            [loading]="loading"
            [paginator]="false"
            [rows]="10"
            [responsive]="true"
            scrollHeight="200px"
            [autoLayout]="true"
            [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
              <!-- <input class="form-control input-sm" type="text" pInputText placeholder="{{'common.search' | translate}}" (input)="reportsTable.filterGlobal($event.target.value, 'contains')"> -->
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate>
                SamaStatictics.IndexCount
              </th>
              <th translate>
                SamaStatictics.Age
              </th>
              <th translate>
                SamaStatictics.Male
              </th>  
              <th translate>
                SamaStatictics.Female
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-request>
            <tr>
              <td style="word-wrap: break-word">
                {{ request.Index || emptyStringValue}}
              </td>
              <td style="word-wrap: break-word">
                {{ request.range || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.totalCountMale || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.totalCountFemale || emptyStringValue }}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>


<!---------------حسب الآلية المستخدمة للدفع-->
<div class="row" [ngClass]="{'hidden': firstTime}">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
         <div class="text-left clearfix">{{'SamaStatictics.Count of Polices Per Payment Method' | translate}} 
        </div> 
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table
          #reportsTable
            [value]="allPaymentMethodModel"
            [lazy]="true"
            (onLazyLoad)="requestsLazyLoad($event)"
            [lazyLoadOnInit]="false"
            [totalRecords]="requestsCount"
            [resetPageOnSort]="true"
            [rowsPerPageOptions]="[25]"
            [loading]="loading"
            [paginator]="false"
            [rows]="10"
            [responsive]="true"
            scrollHeight="200px"
            [autoLayout]="true"
            [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
              <!-- <input class="form-control input-sm" type="text" pInputText placeholder="{{'common.search' | translate}}" (input)="reportsTable.filterGlobal($event.target.value, 'contains')"> -->
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate>
                SamaStatictics.IndexCount
              </th>
              <th translate>
                SamaStatictics.Method Of Payment
              </th>
              <th translate>
                SamaStatictics.Count Of Polices
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-request>
            <tr>
              <td style="word-wrap: break-word">
                {{ request.Index || emptyStringValue}}
              </td>
              <td style="word-wrap: break-word">
                {{ request.paymentMethod || emptyStringValue}}
              </td>
              <td style="word-wrap: break-word">
                {{ request.totalPolices || emptyStringValue }}
              </td>
              
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>



<!------بيانات الحسابات-->

<div class="row" [ngClass]="{'hidden': firstTime}">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
         <div class="text-left clearfix">{{'SamaStatictics.Accounts statictics' | translate}} 
        </div> 
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table
          #reportsTable
            [value]="totalInSystem"
            [lazy]="true"
            (onLazyLoad)="requestsLazyLoad($event)"
            [lazyLoadOnInit]="false"
            [totalRecords]="requestsCount"
            [resetPageOnSort]="true"
            [rowsPerPageOptions]="[25]"
            [loading]="loading"
            [paginator]="false"
            [rows]="10"
            [responsive]="true"
            scrollHeight="200px"
            [autoLayout]="true"
            [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
              <!-- <input class="form-control input-sm" type="text" pInputText placeholder="{{'common.search' | translate}}" (input)="reportsTable.filterGlobal($event.target.value, 'contains')"> -->
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate>
                SamaStatictics.IndexCount
              </th>
              <th translate>
                SamaStatictics.Item
              </th>
              <th translate>
                SamaStatictics.Individual
              </th>  <th translate>
                SamaStatictics.Corporate
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-request>
            <tr>
              <td style="word-wrap: break-word">
                {{ request.Index || emptyStringValue}}
              </td>
              <td style="word-wrap: break-word">
                {{ request.Item || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.TotalIndividualUsersInTheSystem || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.TotalCorporateUsersInTheSystem || emptyStringValue }}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>



<!------اجمالي طلبات الشراء (موقع - موبايل)-->
<div class="row" [ngClass]="{'hidden': firstTime}">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
       <div class="text-left clearfix">{{'SamaStatictics.Total Purchase Requests (Requests for Quotation)' | translate}} 
        </div> 
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table
          #reportsTable
            [value]="allChannelModel"
            [lazy]="true"
            (onLazyLoad)="requestsLazyLoad($event)"
            [lazyLoadOnInit]="false"
            [totalRecords]="requestsCount"
            [resetPageOnSort]="true"
            [rowsPerPageOptions]="[25]"
            [loading]="loading"
            [paginator]="false"
            [rows]="10"
            [responsive]="true"
            scrollHeight="200px"
            [autoLayout]="true"
            [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
              <!-- <input class="form-control input-sm" type="text" pInputText placeholder="{{'common.search' | translate}}" (input)="reportsTable.filterGlobal($event.target.value, 'contains')"> -->
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th translate>
                SamaStatictics.IndexCount
              </th>
              <th translate>
                SamaStatictics.Mechanism
              </th>
              <th translate>
                SamaStatictics.Count Of Polices             
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-request>
            <tr>
              <td style="word-wrap: break-word">
                {{ request.Index || emptyStringValue}}
              </td>
              <td style="word-wrap: break-word">
                {{ request.Channel || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ request.TotalPurchasedPolicies || emptyStringValue }}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>







</div>




<p-dialog [(visible)]="selectedRequest" [modal]="true" [responsive]="true" [minY]="70" [baseZIndex]="10000" [dismissableMask]="true" [rtl]="!isEnglish">
    <div *ngIf="selectedRequest">
      <div class="info-row"><h4 class="">{{'serviceRequests.serviceRequest' | translate}}:</h4> <p class="">{{selectedRequest.serviceRequest || emptyStringValue}}</p></div>
      <div class="info-row"><h4 class="">{{'serviceRequests.serviceResponse' | translate}}:</h4> <p class="">{{selectedRequest.serviceResponse || emptyStringValue}}</p></div>

     </div>
  </p-dialog>
