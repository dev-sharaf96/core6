
<div class="row">
  <div class="col-xs-12">
    <h4 class="page-header">{{ 'navbar.payments' | translate }}</h4>
  </div>
</div>
<div class="row">
  <div class="panel panel-default">
    <div class="panel-heading" translate>common.filter_by</div>
    <!-- /.panel-heading -->
    <div class="panel-body">
      <div class="row">
        <div class="col-sm-3">
          <div class="form-group">
            <label for="invoiceNo" translate>invoice.invoice_no</label>
            <input type="text" [(ngModel)]="InvoiceNumber" class="form-control" id="invoiceNo" />
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="referenceNo" translate>invoice.reference_id</label>
            <input type="text" [(ngModel)]="ReferenceId" class="form-control" id="referenceNo" />
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="" translate>common.SadadBillsNumber</label>
            <input type="text" [(ngModel)]="SadadBillsNumber" class="form-control" id="SadadBillsNumber" />

          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="" translate>common.IsPaid</label>
            <p-dropdown [options]="PaymentStatuses" [(ngModel)]="PaymentStatus" optionLabel="name" filter="true" [style]="{'width':'100%'}"></p-dropdown>
          </div>

        </div>
        <div class="col-xs-12 col-md-2">
          <button (click)="loadSearchResult()" class="btn btn-primary" style="margin-top: 20px;" translate>
            common.search
          </button>
        </div>
      </div>
      <br />
    </div>
    <!-- /.panel-body -->
  </div>
  <!-- /.panel -->
</div>
<!-- /.row -->
<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="text-left clearfix">
          {{'common.results_count' | translate}} : {{Records.length}}
        </div>
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <p-table #esalInvoicesTable [value]="Records" [lazy]="true" (onLazyLoad)="loadSearchResult()" [lazyLoadOnInit]="false" [totalRecords]="Records.length"
                 [resetPageOnSort]="true" [rowsPerPageOptions]="[5, 10, 20]" [loading]="loading" [paginator]="true" [rows]="10"
                 [responsive]="true" scrollHeight="200px" [autoLayout]="true" [resizableColumns]="true">
          <ng-template pTemplate="caption" class="panel-heading">
            <div style="text-align: right">
              <!-- <input class="form-control input-sm" type="text" pInputText placeholder="{{'common.search' | translate}}" (input)="paymentsTable.filterGlobal($event.target.value, 'contains')"> -->
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th [pSortableColumn]="'InvoiceNo'" translate>
                invoice.invoice_no
                <p-sortIcon [field]="'InvoiceNo'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'ReferenceId'" translate>
                invoice.reference_id
                <p-sortIcon [field]="'ReferenceId'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'SadadBillsNumber'" translate>
                common.SadadBillsNumber
                <p-sortIcon [field]="'SadadBillsNumber'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'IsCancelled'" translate>
                common.IsCancelled
                <p-sortIcon [field]="'IsCancelled'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'CreatedDate'" translate>
                invoice.CreatedDate
                <p-sortIcon [field]="'CreatedDate'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'Status'" translate>
                common.status
                <p-sortIcon [field]="'Status'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'IsPaid'" translate>
                common.IsPaid
                <p-sortIcon [field]="'IsPaid'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'BillerId'" translate>
                BillerId
                <p-sortIcon [field]="'BillerId'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'CurAmt'" translate>
                CurAmt
                <p-sortIcon [field]="'CurAmt'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'PrcDt'" translate>
                PrcDt
                <p-sortIcon [field]="'PrcDt'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'DueDt'" translate>
                DueDt
                <p-sortIcon [field]="'DueDt'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>


              <th [pSortableColumn]="'EfftDt'" translate>
                EfftDt
                <p-sortIcon [field]="'EfftDt'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'BankPmtId'" translate>
                BankPmtId
                <p-sortIcon [field]="'BankPmtId'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'ProxyPayorOfficialIdType'" translate>
                ProxyPayorOfficialIdType
                <p-sortIcon [field]="'ProxyPayorOfficialIdType'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'PaymentStatus'" translate>
                PaymentStatus
                <p-sortIcon [field]="'PaymentStatus'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'ErrorCode'" translate>
                common.ErrorCode
                <p-sortIcon [field]="'ErrorCode'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'ErrorMessage'" translate>
                ErrorMessage
                <p-sortIcon [field]="'ErrorMessage'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'Method'" translate>
                Method
                <p-sortIcon [field]="'Method'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'ServerIP'" translate>
                ServerIP
                <p-sortIcon [field]="'ServerIP'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>

              <th [pSortableColumn]="'ServerRequest'" translate>
                ServerRequest
                <p-sortIcon [field]="'ServerRequest'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>


            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-payment>
            <tr>
              <td style="word-wrap: break-word">
                {{ payment.InvoiceNumber || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.ReferenceId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{payment.SadadBillsId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.IsCancelled}}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.CreatedDate || emptyStringValue | date }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.Status || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.IsPaid }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.BillerId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.CurAmt || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.PrcDt || emptyStringValue | date }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.DueDt || emptyStringValue | date}}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.EfftDt || emptyStringValue | date}}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.BankPmtId || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.ProxyPayorOfficialIdType || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.PaymentStatus || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.ErrorCode || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.ErrorMessage || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.Method || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.ServerIP || emptyStringValue }}
              </td>
              <td style="word-wrap: break-word">
                {{ payment.ServerRequest || emptyStringValue }}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td style="text-align: center">
                {{ "common.noRecordsFound" | translate }}
              </td>
            </tr>
          </ng-template>
        </p-table>
        <!-- /.table-responsive -->
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
  <!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<!-- <app-loader *ngIf="firstTime"></app-loader> -->
<!--<p-dialog [(visible)]="confirmReproccess" [modal]="true" [responsive]="true" [dismissableMask]="true" [rtl]="!isEnglish" [header]="'common.reproccess_confirm' | translate" [draggable]="false" [resizable]="false" [maximizable]="false" [width]="350" [baseZIndex]="10000">
<div translate>common.confirm</div>
<button class="btn btn-success mr-r_s" (click)="reproccess(selectedPayment.ReferenceId)" translate>updateRequest.yes</button>
<button class="btn btn-danger" (click)="confirmReproccess = false" translate>updateRequest.no</button>
</p-dialog>-->
<!-- <p-dialog >
<div *ngIf="selectedRequest">
<div class="info-row"><h4 class="">{{'serviceRequests.serviceRequest' | translate}}:</h4> <p class="">{{selectedRequest.serviceRequest}}</p></div>
<div class="info-row"><h4 class="">{{'serviceRequests.serviceResponse' | translate}}:</h4> <p class="">{{selectedRequest.serviceResponse}}</p></div>
</div>
</p-dialog> -->
<!-- <p-confirmDialog #cd header="Confirmation" icon="pi pi-exclamation-triangle">
<p-footer>
<button type="button" pButton icon="pi pi-times" label="No" (click)="cd.reject()"></button>
<button type="button" pButton icon="pi pi-check" label="Yes" (click)="cd.accept()"></button>
</p-footer>
</p-confirmDialog> -->
